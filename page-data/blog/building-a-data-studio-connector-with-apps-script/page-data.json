{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/building-a-data-studio-connector-with-apps-script/",
    "result": {"data":{"site":{"siteMetadata":{"title":"jordan rhea","siteUrl":"https://jordanrhea.com"}},"markdownRemark":{"id":"181dea82-53a8-5de7-a8b3-bfb16c74d459","excerpt":"Creating data studios is a pretty awesome way to create data visualizations. However, if the connectors don’t already exist, you have to find ways to make them…","html":"<p>Creating data studios is a pretty awesome way to create data visualizations. However, if the connectors don’t already exist, you have to find ways to make them exist. That is where Google Apps Script comes into play. That is what we are going to do now!</p>\n<p>Part 1: Building and deploying the connector\nPart 2: Refactoring the code and caching the data\nPart 3: Design the dashboard and embed in a website</p>\n<p>First step is creating an Auth.gs file and writing some simple Authentication data. There are other ways to do the authentication, but we are going to stick with the easy way to start.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> cc <span class=\"token operator\">=</span> DataStudioApp<span class=\"token punctuation\">.</span><span class=\"token function\">createCommunityConnector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// https://developers.google.com/datastudio/connector/reference#getauthtype</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAuthType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> AuthTypes <span class=\"token operator\">=</span> cc<span class=\"token punctuation\">.</span>AuthType<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> cc\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newAuthTypeResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setAuthType</span><span class=\"token punctuation\">(</span>AuthTypes<span class=\"token punctuation\">.</span><span class=\"token constant\">NONE</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// https://developers.google.com/datastudio/connector/reference#isadminuser</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">isAdminUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next up is building the configuration. These are parameters that get attached to the request that we can use throughout the connection process. In this project we don’t really need them, but I am going to put my user id on there for fun.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> cc <span class=\"token operator\">=</span> DataStudioApp<span class=\"token punctuation\">.</span><span class=\"token function\">createCommunityConnector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token constant\">DEFAULT_USER</span> <span class=\"token operator\">=</span> PropertiesService<span class=\"token punctuation\">.</span><span class=\"token function\">getScriptProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'STACKOVERFLOW_USER_ID'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// https://developers.google.com/datastudio/connector/reference#getconfig</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> config <span class=\"token operator\">=</span> cc<span class=\"token punctuation\">.</span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  config\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'instructions'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enter the User Id to pull StackOverflow data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  config\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newTextInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userId'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enter a single user id'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setHelpText</span><span class=\"token punctuation\">(</span><span class=\"token string\">'e.g. \"4541958\"'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setPlaceholder</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DEFAULT_USER</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setAllowOverride</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//  config.setDateRangeRequired(true);</span>\n\n  <span class=\"token keyword\">return</span> config<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now comes the schema. This is the backbone of the whole connector. The connector uses the schema to define the data that comes back from … wherever it comes from. In this case, it is coming from a couple of different APIs.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> fields <span class=\"token operator\">=</span> cc<span class=\"token punctuation\">.</span><span class=\"token function\">getFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> types <span class=\"token operator\">=</span> cc<span class=\"token punctuation\">.</span>FieldType<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> aggregations <span class=\"token operator\">=</span> cc<span class=\"token punctuation\">.</span>AggregationType<span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'display_name'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Display Name'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'link'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Link'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'profile_image'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Profile Image'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gold_badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Gold Badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">NUMBER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'silver_badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Silver Badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">NUMBER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newDimension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bronze_badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bronze Badges'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">NUMBER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fields\n    <span class=\"token punctuation\">.</span><span class=\"token function\">newMetric</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reputation'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Reputation'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token constant\">NUMBER</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">setAggregation</span><span class=\"token punctuation\">(</span>aggregations<span class=\"token punctuation\">.</span><span class=\"token constant\">SUM</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> fields<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// https://developers.google.com/datastudio/connector/reference#getschema</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getSchema</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">schema</span><span class=\"token operator\">:</span> <span class=\"token function\">getFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>schema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>After the backbone, now we gotta put some muscles on this thing. The <code class=\"language-text\">getData</code> function does that, it organizes the work that needs to be done.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://developers.google.com/datastudio/connector/reference#getdata</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> requestedFields <span class=\"token operator\">=</span> <span class=\"token function\">getFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forIds</span><span class=\"token punctuation\">(</span>\n    request<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> field<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start request'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> apiResponse <span class=\"token operator\">=</span> <span class=\"token function\">fetchDataFromApi</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token function\">formatData</span><span class=\"token punctuation\">(</span>apiResponse<span class=\"token punctuation\">,</span> requestedFields<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    cc<span class=\"token punctuation\">.</span><span class=\"token function\">newUserError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">setDebugText</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error fetching data from API. Exception details: '</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'The connector has encountered an unrecoverable error. Please try again later, or file an issue if this error persists.'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">throwException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">schema</span><span class=\"token operator\">:</span> requestedFields<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">rows</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fetchDataFromApi</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  request <span class=\"token operator\">=</span> request<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> url <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'https://api.stackexchange.com/2.2/users/'</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">.</span>configParams<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'?order=desc&amp;sort=reputation&amp;site=stackoverflow'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'&amp;key='</span> <span class=\"token operator\">+</span> PropertiesService<span class=\"token punctuation\">.</span><span class=\"token function\">getScriptProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'STACKOVERFLOW_KEY'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> response <span class=\"token operator\">=</span> UrlFetchApp<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">getContentText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">formatData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response<span class=\"token punctuation\">,</span> requestedFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> item <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> row <span class=\"token operator\">=</span> requestedFields<span class=\"token punctuation\">.</span><span class=\"token function\">asArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'display_name'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>display_name<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'link'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'profile_image'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>profile_image<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'gold_badges'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>badge_counts<span class=\"token punctuation\">.</span>gold<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'silver_badges'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>badge_counts<span class=\"token punctuation\">.</span>silver<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'bronze_badges'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>badge_counts<span class=\"token punctuation\">.</span>bronze<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'reputation'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>reputation<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> row <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Finally, we can write the manifest and then deploy from manifest. This will provide us with a project ID that we can connect as a data source in data studio.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"timeZone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Asia/Hong_Kong\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dataStudio\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Developer Data\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"logoUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://jordanrhea.com/static/isotope-81ac8718d875fc9e5fad9213dd690341.png\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"company\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jordanrhea.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"companyUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jordanrhea.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"addonUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://techyenglish.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"supportUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://techyenglish.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"get developer data\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"stackoverflow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"github\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Whew! With any luck that will generate a data source that you can use to start building your dashboard. In part 2 we will be adding a cache to limit the number of requests we have to make to various APIs (because we will also be adding some other data sources!).</p>","frontmatter":{"title":"Building a Data Studio Connector with Apps Script","date":null,"description":null,"image":{"publicURL":"/static/98336f6397df9275943ff3fcc345bbcb/default-code.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282838","images":{"fallback":{"src":"/static/98336f6397df9275943ff3fcc345bbcb/6b4a2/default-code.png","srcSet":"/static/98336f6397df9275943ff3fcc345bbcb/2e063/default-code.png 358w,\n/static/98336f6397df9275943ff3fcc345bbcb/84c70/default-code.png 716w,\n/static/98336f6397df9275943ff3fcc345bbcb/6b4a2/default-code.png 1432w","sizes":"(min-width: 1432px) 1432px, 100vw"},"sources":[{"srcSet":"/static/98336f6397df9275943ff3fcc345bbcb/6574d/default-code.webp 358w,\n/static/98336f6397df9275943ff3fcc345bbcb/77f0e/default-code.webp 716w,\n/static/98336f6397df9275943ff3fcc345bbcb/73fa0/default-code.webp 1432w","type":"image/webp","sizes":"(min-width: 1432px) 1432px, 100vw"}]},"width":1432,"height":898}}}},"fields":{"date":"Tue Sep 17 2019 08:00:00 GMT+0800 (China Standard Time)","thumbnail":""}},"previous":{"fields":{"slug":"print-a-new-number-by-adding-one-to-each-of-its-digit/"},"frontmatter":{"title":"Print a new number by adding one to each of its digit"}},"next":{"fields":{"slug":"google-classroom-api-builder/"},"frontmatter":{"title":"Google Classroom API Builder"}}},"pageContext":{"id":"181dea82-53a8-5de7-a8b3-bfb16c74d459","previousPostId":"4cc94790-8daa-5048-bac6-7ae86395455e","nextPostId":"7a11947e-ccee-5c46-ae80-2075425788cb"}},
    "staticQueryHashes": ["1324386404","4144781314"]}